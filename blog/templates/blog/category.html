{% extends 'blog/base_blog.html' %}

{% load staticfiles %}
{% load blog_filter %}

{% block title %}乌鸦的庭院:{{ category.category_name }}{% endblock %}

{% block top_banner %}
  <section class="col s12">
    <div class="card grey darken-4">
      <div class="card-content white-text">
        <span class="card-title">乌鸦的庭院</span>
        <p>{{ category.category_name }}</p>
        <p class="right-align grey-text text-lighten-3">{{ category.brief }}</p>
      </div>
    </div>
  </section>
{% endblock %}

{% block main_area %}
  {% if category %}
    {% if article_list %}
      <div class="row flow-list">
        {% for article in article_list %}
          <div class="flow-item col s12 m6 l6">
            <div class="card">
              <div class="card-content">
                <a class="card-title grey-text text-darken-3" href="{% url 'blog:article' article.id %}">{{ article.title }}</a>
                <hr>
                <p>{{ article.text|markdown2html|truncatechars_html:200 }}</p>
                <p class="right-align grey-text text-darken-3"><small>{{ article.publish_time|date:"Y-m-d" }}</small></p>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="card">
        <div class="card-content">
          <p class="card-title">暂时还没有文章，敬请期待</p>
        </div>
      </div>
    {% endif %}
  {% else %}
    <h1>未找到相应的分类</h1>
  {% endif %}
{% endblock %}

{% block js %}
  <script type="text/javascript" src="{% static 'js/masonry.min.js' %}"></script>
{% endblock %}
{% block js-inline %}
  <script>
    $(document).ready(function () {
      $(".button-collapse").sideNav({edge: 'left'});
      $('.collapsible').collapsible();
    });

    $('.flow-list').masonry({
      itemSelector: '.flow-item'
    });
  </script>
{% endblock %}
